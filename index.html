<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IBD Diagnostic Tool - Referto Strutturato</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        @keyframes spin { to { transform: rotate(360deg); } }
        .animate-spin { animation: spin 1s linear infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: .5; } }
        .animate-pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        @media print {
            .no-print { display: none !important; }
            .print-only { display: block !important; }
        }
        .print-only { display: none; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;
        
        const Microscope = () => <i data-lucide="microscope"></i>;
        const FileText = () => <i data-lucide="file-text"></i>;
        const User = () => <i data-lucide="user"></i>;
        const MapPin = () => <i data-lucide="map-pin"></i>;
        const Printer = () => <i data-lucide="printer"></i>;

        const IBDDiagnosticTool = () => {
            const [activeTab, setActiveTab] = useState('clinical');
            const [patientData, setPatientData] = useState({
                age: '',
                gender: '',
                clinicalHistory: '',
                indication: ''
            });
            
            const [specimens, setSpecimens] = useState([
                { id: 1, label: 'A', site: 'cieco', findings: {} }
            ]);
            
            const [cd3Count, setCd3Count] = useState('');

            const anatomicalSites = [
                { value: 'ileo', label: 'Ileo terminale' },
                { value: 'cieco', label: 'Cieco' },
                { value: 'ascendente', label: 'Colon ascendente' },
                { value: 'trasverso', label: 'Colon trasverso' },
                { value: 'discendente', label: 'Colon discendente' },
                { value: 'sigma', label: 'Sigma' },
                { value: 'retto', label: 'Retto' }
            ];

            useEffect(() => {
                const savedData = localStorage.getItem('ibdAppDataV2');
                if (savedData) {
                    try {
                        const parsed = JSON.parse(savedData);
                        if (parsed.patientData) setPatientData(parsed.patientData);
                        if (parsed.specimens) setSpecimens(parsed.specimens);
                        if (parsed.cd3Count !== undefined) setCd3Count(parsed.cd3Count);
                    } catch (e) {
                        console.error('Errore caricamento:', e);
                    }
                }
            }, []);

            useEffect(() => {
                const dataToSave = { patientData, specimens, cd3Count, lastUpdated: new Date().toISOString() };
                localStorage.setItem('ibdAppDataV2', JSON.stringify(dataToSave));
            }, [patientData, specimens, cd3Count]);

            useEffect(() => {
                if (window.lucide) {
                    window.lucide.createIcons();
                }
            }, [activeTab, specimens, cd3Count]);

            const findingsDatabase = {
                architectural: {
                    title: "Alterazioni Architetturali (CronicitÃ )",
                    color: "bg-purple-50 border-purple-300",
                    items: {
                        glandular_distortion: {
                            name: "Distorsione ghiandolare",
                            desc: "Cripte ramificate, accorciate, distribuzione irregolare"
                        },
                        glandular_atrophy: {
                            name: "Atrofia ghiandolare",
                            desc: "Riduzione numerica delle cripte, spaziatura aumentata"
                        },
                        paneth_metaplasia: {
                            name: "Metaplasia di Paneth",
                            desc: "Cellule di Paneth ectopiche nel colon sinistro"
                        },
                        mucin_depletion: {
                            name: "Deplezione mucinica",
                            desc: "Riduzione/assenza goblet cells"
                        }
                    }
                },
                inflammation: {
                    title: "Pattern Infiammatorio",
                    color: "bg-red-50 border-red-300",
                    items: {
                        chronic_inflammation: {
                            name: "Infiammazione cronica linfoplasmacellulare",
                            desc: "Infiltrato cronico nella lamina propria"
                        },
                        basal_plasmacytosis: {
                            name: "Plasmacitosi basale",
                            desc: "Accumulo plasmacellule alla base delle cripte"
                        },
                        acute_inflammation: {
                            name: "Infiltrato flogistico acuto (granulocitario)",
                            desc: "Granulociti neutrofili nella lamina propria"
                        },
                        cryptitis: {
                            name: "Criptite",
                            desc: "Neutrofili nell'epitelio delle cripte"
                        },
                        crypt_abscesses: {
                            name: "Ascessi criptici",
                            desc: "Neutrofili nel lume ghiandolare"
                        },
                        transmural: {
                            name: "Infiammazione transmurale",
                            desc: "Infiltrato in tutti gli strati (solo su resezioni)"
                        },
                        fissuring_ulcers: {
                            name: "Ulcere fissuriformi",
                            desc: "Ulcere lineari profonde"
                        }
                    }
                },
                specific: {
                    title: "Reperti Patognomonici",
                    color: "bg-orange-50 border-orange-300",
                    items: {
                        granulomas: {
                            name: "Granulomi epitelioidi non-caseosi",
                            desc: "Aggregati epitelioidi con/senza cellule giganti",
                            pathognomonic: true
                        }
                    }
                }
            };

            const addSpecimen = () => {
                const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
                const nextLetter = letters[specimens.length];
                setSpecimens([...specimens, { 
                    id: Date.now(), 
                    label: nextLetter, 
                    site: 'cieco', 
                    findings: {} 
                }]);
            };

            const removeSpecimen = (id) => {
                if (specimens.length > 1) {
                    setSpecimens(specimens.filter(s => s.id !== id));
                }
            };

            const updateSpecimen = (id, field, value) => {
                setSpecimens(specimens.map(s => 
                    s.id === id ? { ...s, [field]: value } : s
                ));
            };

            const updateFinding = (specimenId, category, key, severity) => {
                setSpecimens(specimens.map(s => {
                    if (s.id === specimenId) {
                        return {
                            ...s,
                            findings: {
                                ...s.findings,
                                [`${category}_${key}`]: severity
                            }
                        };
                    }
                    return s;
                }));
            };

            const getFindingSeverity = (specimenId, category, key) => {
                const specimen = specimens.find(s => s.id === specimenId);
                return specimen?.findings?.[`${category}_${key}`] || 'assente';
            };

            const generateReport = () => {
                const groupedSpecimens = {};
                
                specimens.forEach(spec => {
                    const hasFindings = Object.values(spec.findings).some(v => v !== 'assente');
                    if (!groupedSpecimens[spec.site]) {
                        groupedSpecimens[spec.site] = [];
                    }
                    groupedSpecimens[spec.site].push({
                        ...spec,
                        hasFindings
                    });
                });

                let report = {
                    materialReceived: [],
                    diagnoses: [],
                    comment: ''
                };

                Object.entries(groupedSpecimens).forEach(([site, specs]) => {
                    const labels = specs.map(s => s.label).join('-');
                    const siteName = anatomicalSites.find(a => a.value === site)?.label || site;
                    report.materialReceived.push(`${labels}: ${siteName}`);

                    const withFindings = specs.filter(s => s.hasFindings);
                    const withoutFindings = specs.filter(s => !s.hasFindings);

                    if (withFindings.length > 0) {
                        const allFindings = withFindings[0].findings;
                        const findingsList = [];
                        
                        let hasChronicChanges = false;
                        let hasActivity = false;
                        let hasGranulomas = false;

                        Object.entries(allFindings).forEach(([key, severity]) => {
                            if (severity === 'assente') return;
                            
                            const [category, findingKey] = key.split('_').reduce((acc, part, idx, arr) => {
                                if (idx === 0) return [part, ''];
                                if (idx === 1) return [acc[0], part];
                                return [acc[0], acc[1] + '_' + part];
                            }, ['', '']);
                            
                            const finding = findingsDatabase[category]?.items[findingKey];
                            if (finding) {
                                if (category === 'architectural') hasChronicChanges = true;
                                if (category === 'inflammation' && (findingKey.includes('crypt') || findingKey === 'cryptitis' || findingKey === 'acute_inflammation')) hasActivity = true;
                                if (findingKey === 'granulomas') hasGranulomas = true;
                            }
                        });

                        let diagnosis = '';
                        if (hasGranulomas) {
                            diagnosis = `Colite cronica attiva con granulomi epitelioidi non-caseosi`;
                        } else if (hasChronicChanges && hasActivity) {
                            diagnosis = `Colite cronica attiva`;
                            
                            const chronicDetails = [];
                            const activityDetails = [];
                            
                            if (allFindings['architectural_glandular_distortion'] !== 'assente' || 
                                allFindings['architectural_glandular_atrophy'] !== 'assente') {
                                chronicDetails.push('alterazioni architetturali');
                            }
                            if (allFindings['inflammation_basal_plasmacytosis'] !== 'assente') {
                                chronicDetails.push('plasmacitosi basale');
                            }
                            
                            if (allFindings['inflammation_acute_inflammation'] !== 'assente') {
                                activityDetails.push('infiltrato granulocitario');
                            }
                            if (allFindings['inflammation_cryptitis'] !== 'assente') {
                                activityDetails.push('criptite');
                            }
                            if (allFindings['inflammation_crypt_abscesses'] !== 'assente') {
                                activityDetails.push('ascessi criptici');
                            }
                            
                            if (chronicDetails.length > 0) {
                                diagnosis += ` caratterizzata da ${chronicDetails.join(', ')}`;
                            }
                            if (activityDetails.length > 0) {
                                diagnosis += `, ${activityDetails.join(' e ')}`;
                            }
                            
                            const severity = allFindings['inflammation_chronic_inflammation'];
                            if (severity && severity !== 'assente') {
                                diagnosis += `. Infiltrato infiammatorio ${severity}`;
                            }
                            
                        } else if (hasChronicChanges) {
                            diagnosis = `Colite cronica in fase quiescente`;
                        } else if (hasActivity) {
                            diagnosis = `Colite attiva senza franche alterazioni croniche`;
                        } else {
                            diagnosis = `Mucosa colica con lievi alterazioni infiammatorie`;
                        }

                        report.diagnoses.push({
                            site: siteName,
                            labels: labels,
                            diagnosis: diagnosis
                        });
                    }

                    if (withoutFindings.length > 0) {
                        const labels = withoutFindings.map(s => s.label).join('-');
                        report.diagnoses.push({
                            site: siteName,
                            labels: labels,
                            diagnosis: 'Mucosa colica nei limiti della norma'
                        });
                    }
                });

                const affectedSites = report.diagnoses.filter(d => 
                    !d.diagnosis.includes('nei limiti della norma')
                ).map(d => d.site);
                
                const normalSites = report.diagnoses.filter(d => 
                    d.diagnosis.includes('nei limiti della norma')
                ).map(d => d.site);

                const hasGranulomas = specimens.some(s => 
                    s.findings['specific_granulomas'] !== 'assente' && s.findings['specific_granulomas'] !== undefined
                );

                const hasRectalSparing = normalSites.includes('Retto') && affectedSites.length > 0;
                const hasRightSidedOnly = affectedSites.every(s => 
                    ['Cieco', 'Colon ascendente', 'Ileo terminale'].includes(s)
                ) && affectedSites.length > 0;

                if (hasGranulomas) {
                    report.comment = `Il quadro istologico depone per MALATTIA DI CROHN in fase attiva. La presenza di granulomi epitelioidi non-caseosi Ã¨ patognomonica (presente nel 20-40% delle biopsie).`;
                } else if (affectedSites.length > 0) {
                    report.comment = `Il quadro istologico depone per colite cronica attiva localizzata a ${affectedSites.join(', ')}.

La distribuzione anatomica ${hasRectalSparing ? 'con risparmio rettale ' : ''}${hasRightSidedOnly ? 'limitata al colon destro ' : ''}risulta atipica rispetto ai pattern classici di malattia infiammatoria intestinale.`;

                    if (hasRectalSparing || hasRightSidedOnly) {
                        report.comment += `\n\nIl risparmio rettale e/o la distribuzione discontinua escludono una rettocolite ulcerosa classica. L'assenza di granulomi epitelioidi e di coinvolgimento transmurale (non valutabile su biopsie mucose) non permette una diagnosi definitiva di malattia di Crohn.`;
                        report.comment += `\n\nIl quadro puÃ² essere inquadrabile come:\n1. IBD-unclassified\n2. Variante di rettocolite ulcerosa con localizzazione atipica\n3. Malattia di Crohn iniziale senza granulomi`;
                        report.comment += `\n\nSi consiglia correlazione clinico-endoscopica, imaging dell'intestino tenue per escludere lesioni ileali, e follow-up istologico per eventuale riclassificazione.`;
                    }
                } else {
                    report.comment = 'Quadro morfologico nei limiti della norma. Non si evidenziano alterazioni significative compatibili con malattia infiammatoria cronica intestinale.';
                }

                return report;
            };

            const report = useMemo(() => {
                if (activeTab !== 'diagnosis') return null;
                return generateReport();
            }, [activeTab, specimens, cd3Count]);

            const printReport = () => {
                window.print();
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4">
                    <div className="max-w-6xl mx-auto">
                        <div className="bg-white rounded-lg shadow-lg p-6 mb-6 no-print">
                            <div className="flex flex-col md:flex-row items-start md:items-center justify-between gap-4">
                                <div className="flex items-center gap-3">
                                    <Microscope />
                                    <div>
                                        <h1 className="text-2xl md:text-3xl font-bold text-gray-800">IBD Diagnostic Tool</h1>
                                        <p className="text-xs md:text-sm text-gray-600">Generatore referto strutturato per IBD</p>
                                    </div>
                                </div>
                                <div className="flex flex-col items-start md:items-end gap-2">
                                    <span className="text-xs text-green-600 flex items-center gap-1">
                                        <span className="w-2 h-2 bg-green-600 rounded-full animate-pulse"></span>
                                        Salvataggio automatico
                                    </span>
                                    <button
                                        onClick={() => {
                                            if (confirm('Cancellare tutti i dati?')) {
                                                setPatientData({ age: '', gender: '', clinicalHistory: '', indication: '' });
                                                setSpecimens([{ id: 1, label: 'A', site: 'cieco', findings: {} }]);
                                                setCd3Count('');
                                                localStorage.removeItem('ibdAppDataV2');
                                            }
                                        }}
                                        className="text-xs text-red-600 hover:text-red-800 underline"
                                    >
                                        Reset dati
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div className="bg-white rounded-lg shadow-lg mb-6">
                            <div className="flex flex-col sm:flex-row border-b no-print">
                                {[
                                    { id: 'clinical', label: 'Dati Clinici', icon: <User /> },
                                    { id: 'specimens', label: 'Campioni', icon: <MapPin /> },
                                    { id: 'diagnosis', label: 'Referto', icon: <FileText /> }
                                ].map(tab => (
                                    <button
                                        key={tab.id}
                                        onClick={() => setActiveTab(tab.id)}
                                        className={`flex-1 flex items-center justify-center gap-2 px-4 py-3 font-semibold ${
                                            activeTab === tab.id ? 'bg-indigo-600 text-white' : 'bg-gray-100 text-gray-600'
                                        }`}
                                    >
                                        {tab.icon}
                                        <span className="text-sm sm:text-base">{tab.label}</span>
                                    </button>
                                ))}
                            </div>

                            <div className="p-6">
                                {activeTab === 'clinical' && (
                                    <div className="space-y-6">
                                        <div className="bg-blue-50 border border-blue-200 rounded-lg p-4">
                                            <p className="text-sm text-blue-800">
                                                <strong>Info:</strong> Questi dati compariranno nel referto finale.
                                            </p>
                                        </div>

                                        <div className="grid md:grid-cols-2 gap-6">
                                            <div>
                                                <label className="block font-semibold mb-2">EtÃ </label>
                                                <input
                                                    type="number"
                                                    value={patientData.age}
                                                    onChange={(e) => setPatientData({...patientData, age: e.target.value})}
                                                    placeholder="Es. 45"
                                                    className="w-full px-4 py-2 border rounded-lg"
                                                />
                                            </div>

                                            <div>
                                                <label className="block font-semibold mb-2">Sesso</label>
                                                <select
                                                    value={patientData.gender}
                                                    onChange={(e) => setPatientData({...patientData, gender: e.target.value})}
                                                    className="w-full px-4 py-2 border rounded-lg"
                                                >
                                                    <option value="">Seleziona...</option>
                                                    <option value="M">Maschio</option>
                                                    <option value="F">Femmina</option>
                                                </select>
                                            </div>
                                        </div>

                                        <div>
                                            <label className="block font-semibold mb-2">Quesito Diagnostico / Indicazione Clinica</label>
                                            <textarea
                                                value={patientData.indication}
                                                onChange={(e) => setPatientData({...patientData, indication: e.target.value})}
                                                placeholder="Es. Sospetta IBD. Mapping colonoscopico."
                                                className="w-full px-4 py-3 border rounded-lg h-24"
                                            />
                                        </div>

                                        <div>
                                            <label className="block font-semibold mb-2">Storia Clinica (opzionale)</label>
                                            <textarea
                                                value={patientData.clinicalHistory}
                                                onChange={(e) => setPatientData({...patientData, clinicalHistory: e.target.value})}
                                                placeholder="Es. Pregressa RCU diagnosticata 5 anni fa..."
                                                className="w-full px-4 py-3 border rounded-lg h-32"
                                            />
                                        </div>
                                    </div>
                                )}

                                {activeTab === 'specimens' && (
                                    <div className="space-y-6">
                                        <div className="bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-start justify-between">
                                            <p className="text-sm text-blue-800">
                                                <strong>Campioni bioptici:</strong> Aggiungi le sedi anatomiche biopsiate e per ciascuna specifica i reperti istologici.
                                            </p>
                                            <button
                                                onClick={addSpecimen}
                                                className="ml-4 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-semibold whitespace-nowrap"
                                            >
                                                + Aggiungi sede
                                            </button>
                                        </div>

                                        {specimens.map((specimen, idx) => (
                                            <div key={specimen.id} className="border-2 border-indigo-200 rounded-lg p-6 bg-indigo-50">
                                                <div className="flex items-center justify-between mb-4">
                                                    <div className="flex items-center gap-4">
                                                        <div className="w-12 h-12 bg-indigo-600 text-white rounded-full flex items-center justify-center font-bold text-xl">
                                                            {specimen.label}
                                                        </div>
                                                        <select
                                                            value={specimen.site}
                                                            onChange={(e) => updateSpecimen(specimen.id, 'site', e.target.value)}
                                                            className="px-4 py-2 border-2 border-indigo-300 rounded-lg font-semibold"
                                                        >
                                                            {anatomicalSites.map(site => (
                                                                <option key={site.value} value={site.value}>{site.label}</option>
                                                            ))}
                                                        </select>
                                                    </div>
                                                    {specimens.length > 1 && (
                                                        <button
                                                            onClick={() => removeSpecimen(specimen.id)}
                                                            className="px-3 py-1 bg-red-500 text-white rounded text-sm hover:bg-red-600"
                                                        >
                                                            Rimuovi
                                                        </button>
                                                    )}
                                                </div>

                                                {Object.entries(findingsDatabase).map(([category, data]) => (
                                                    <div key={category} className={`border-2 ${data.color} rounded-lg p-4 mb-4`}>
                                                        <h4 className="font-bold mb-3">{data.title}</h4>
                                                        <div className="space-y-3">
                                                            {Object.entries(data.items).map(([key, item]) => {
                                                                const severity = getFindingSeverity(specimen.id, category, key);
                                                                return (
                                                                    <div key={key} className="bg-white rounded-lg border p-3">
                                                                        <div className="flex items-start gap-2 mb-2">
                                                                            <span className="font-semibold text-sm flex-1">{item.name}</span>
                                                                            {item.pathognomonic && (
                                                                                <span className="text-xs bg-red-600 text-white px-2 py-1 rounded font-bold">
                                                                                    PATOGNOMONICO
                                                                                </span>
                                                                            )}
                                                                        </div>
                                                                        <p className="text-xs text-gray-600 mb-2">{item.desc}</p>
                                                                        <div className="flex items-center gap-2">
                                                                            <select
                                                                                value={severity}
                                                                                onChange={(e) => updateFinding(specimen.id, category, key, e.target.value)}
                                                                                className="flex-1 px-2 py-1 border rounded text-sm"
                                                                            >
                                                                                <option value="assente">Assente</option>
                                                                                <option value="lieve">Lieve</option>
                                                                                <option value="moderata">Moderata</option>
                                                                                <option value="severa">Severa</option>
                                                                            </select>
                                                                            <div className={`px-3 py-1 text-xs font-bold rounded ${
                                                                                severity === 'assente' ? 'bg-gray-200' :
                                                                                severity === 'lieve' ? 'bg-green-200' :
                                                                                severity === 'moderata' ? 'bg-yellow-200' :
                                                                                'bg-red-200'
                                                                            }`}>
                                                                                {severity.toUpperCase()}
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                );
                                                            })}
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                        ))}
                                    </div>
                                )}

                                {activeTab === 'diagnosis' && report && (
                                    <div className="space-y-6">
                                        <div className="flex justify-between items-center no-print mb-4">
                                            <h2 className="text-2xl font-bold">Referto Anatomopatologico</h2>
                                            <button
                                                onClick={printReport}
                                                className="flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-semibold"
                                            >
                                                <Printer />
                                                Stampa
                                            </button>
                                        </div>

                                        <div className="print-only mb-6">
                                            <div className="border-b-2 pb-4 mb-4">
                                                <h1 className="text-2xl font-bold">U.O. ANATOMIA PATOLOGICA</h1>
                                                <p className="text-sm text-gray-600">Referto Istologico</p>
                                            </div>
                                            {patientData.age && (
                                                <p><strong>EtÃ :</strong> {patientData.age} anni</p>
                                            )}
                                            {patientData.gender && (
                                                <p><strong>Sesso:</strong> {patientData.gender === 'M' ? 'Maschio' : 'Femmina'}</p>
                                            )}
                                            {patientData.indication && (
                                                <p><strong>Quesito diagnostico:</strong> {patientData.indication}</p>
                                            )}
                                        </div>

                                        <div className="bg-white border-2 border-gray-300 rounded-lg p-6">
                                            <div className="mb-6">
                                                <h3 className="text-lg font-bold mb-3 text-indigo-800">MATERIALE PERVENUTO:</h3>
                                                <div className="bg-gray-50 p-4 rounded">
                                                    {report.materialReceived.map((item, idx) => (
                                                        <p key={idx} className="mb-1">â¢ {item}</p>
                                                    ))}
                                                </div>
                                            </div>

                                            <div className="mb-6">
                                                <h3 className="text-lg font-bold mb-3 text-indigo-800">DIAGNOSI:</h3>
                                                <div className="space-y-3">
                                                    {report.diagnoses.map((diag, idx) => (
                                                        <div key={idx} className="bg-blue-50 p-4 rounded border-l-4 border-indigo-600">
                                                            <p className="font-bold text-indigo-900 mb-1">
                                                                {diag.labels} ({diag.site}):
                                                            </p>
                                                            <p className="text-gray-800">{diag.diagnosis}</p>
                                                        </div>
                                                    ))}
                                                </div>
                                            </div>

                                            <div>
                                                <h3 className="text-lg font-bold mb-3 text-indigo-800">COMMENTO:</h3>
                                                <div className="bg-yellow-50 p-4 rounded border-l-4 border-yellow-600">
                                                    <p className="whitespace-pre-line text-gray-800">{report.comment}</p>
                                                </div>
                                            </div>
                                        </div>

                                        <div className="bg-yellow-50 border border-yellow-300 rounded-lg p-4 no-print">
                                            <p className="text-sm">
                                                <strong>Disclaimer:</strong> Questo Ã¨ un referto simulato generato automaticamente. La diagnosi definitiva richiede sempre correlazione clinica ed endoscopica.
                                            </p>
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>

                        <div className="text-center text-xs text-gray-600 space-y-1 no-print">
                            <p className="font-semibold">IBD Diagnostic Tool v2.0 - Referto Strutturato</p>
                            <p>Basato su: ECCO Guidelines | WHO Classification 5th Ed | Montreal Classification</p>
                            <p className="text-green-600">â Salvataggio automatico nel browser</p>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<IBDDiagnosticTool />, document.getElementById('root'));
    </script>
</body>
</html>